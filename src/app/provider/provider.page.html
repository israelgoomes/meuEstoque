<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title>Gestão de Estoque</ion-title>
  </ion-toolbar>

</ion-header>
<ion-fab *ngIf="!isDevice" vertical="top" horizontal="end" slot="fixed">
  <ion-fab-button (click)="createProvider()">
    <ion-icon name="add"></ion-icon>
  </ion-fab-button>
</ion-fab>

<ion-content>

  <!-- <div *ngIf="!isDevice"> -->
  <mat-form-field *ngIf="!isDevice" id="filter">
    <mat-label>Procurar</mat-label>
    <input matInput (keyup)="applyFilter($event)">
  </mat-form-field>

  <div *ngIf="!isDevice" class="mat-elevation-z8">
    <table mat-table [dataSource]="dataSource">


      <ng-container matColumnDef="edit">
        <th mat-header-cell *matHeaderCellDef> Editar
        </th>
        <td mat-cell *matCellDef="let element">
          <ion-icon (click)="editProvider(element)" id="edit" name="create"></ion-icon>
        </td>
      </ng-container>

      <ng-container matColumnDef="name">
        <th mat-header-cell *matHeaderCellDef> Nome </th>
        <td mat-cell *matCellDef="let element"> {{element?.name}} </td>
      </ng-container>

      <ng-container matColumnDef="email">
        <th mat-header-cell *matHeaderCellDef> E-mail </th>
        <td mat-cell *matCellDef="let element"> {{element?.email}} </td>
      </ng-container>

      <ng-container matColumnDef="address">
        <th mat-header-cell *matHeaderCellDef> Endereço </th>
        <td mat-cell *matCellDef="let element"> {{element?.address}} </td>
      </ng-container>

      <!-- Symbol Column -->
      <ng-container matColumnDef="cnpj">
        <th mat-header-cell *matHeaderCellDef> Cnpj </th>
        <td mat-cell *matCellDef="let element"> {{element?.cnpj}} </td>
      </ng-container>

      <ng-container matColumnDef="delete">
        <th mat-header-cell *matHeaderCellDef>
        </th>
        <td mat-cell *matCellDef="let element">
          <ion-icon id="delete" (click)="deleteProvider(element)" name="trash-bin-outline"></ion-icon>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
    <mat-paginator [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons></mat-paginator>

  </div>

  <!-- </div> -->

  <ion-card *ngIf="create">

    <ion-card-header>
      <h2>Cadastro de Fornecedor</h2>
    </ion-card-header>

    <ion-card-content>
      <form [formGroup]="providerForm" class="example-form">

        <ion-row>

          <ion-col>
            <mat-form-field class="example-full-width create">
              <input matInput placeholder="Fornecedor" formControlName="name" name="teste">
            </mat-form-field>
          </ion-col>

          <ion-col>
            <mat-form-field class="example-full-width create">
              <input matInput placeholder="E-mail" formControlName="email" name="teste">
            </mat-form-field>
          </ion-col>

          <ion-col>
            <mat-form-field class="example-full-width create">
              <input matInput placeholder="Endereço" formControlName="address" name="teste">
            </mat-form-field>
          </ion-col>

          <ion-col>
            <mat-form-field class="example-full-width create">
              <input type="" matInput placeholder="Cnpj" formControlName="cnpj" name="teste">
            </mat-form-field>
          </ion-col>

        </ion-row>
      </form>
    </ion-card-content>

    <mat-divider></mat-divider>

    <button mat-raised-button color="success" style="background-color: #3880ff; float: right; margin: 10px;"
      (click)="addProvider()">Salvar</button>
    <button mat-raised-button style="border: 1px solid #3880ff; float: right; margin: 10px"
      (click)="cancel()">Cancelar</button>

  </ion-card>


  <div *ngIf="isDevice">

    <mat-form-field id="filter">
      <mat-label>Procurar</mat-label>
      <input matInput [(ngModel)]="args">
    </mat-form-field>

    <mat-accordion>
      <mat-expansion-panel *ngFor="let provider of providers | search : args">
        <mat-expansion-panel-header>
          <mat-panel-title>
            {{provider.name}}
          </mat-panel-title>
          <mat-panel-description>
            {{provider.email}}
          </mat-panel-description>
        </mat-expansion-panel-header>

        <p> Endereço: {{provider.address}} </p>
        <p> Cnpj: {{provider.cnpj}} </p>
      </mat-expansion-panel>
    </mat-accordion>

  </div>


</ion-content>